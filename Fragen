<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kontrollformular</title>

<style>
body {
    font-family: Arial, sans-serif;
    margin: 20px;
}
.section {
    margin-bottom: 20px;
}
button {
    padding: 12px;
    font-size: 18px;
    margin-top: 10px;
    width: 100%;
}
input, select {
    padding: 10px;
    width: 100%;
    margin-top: 5px;
}
.hidden {
    display: none;
}
</style>

<script>
let alkoholZeit = "";
let drogenZeit = "";

function jetztDatumZeit() {
    const jetzt = new Date();
    const datum = jetzt.toLocaleDateString("de-CH");
    const zeit = jetzt.toLocaleTimeString("de-CH", {hour: '2-digit', minute:'2-digit'});
    return datum + " " + zeit;
}

function alkoholClicked() {
    alkoholZeit = jetztDatumZeit();
    document.getElementById("alkohol-section").classList.remove("hidden");
}

function drogenClicked() {
    drogenZeit = jetztDatumZeit();
    document.getElementById("drogen-section").classList.remove("hidden");
}

function sendeEmail() {
    const name = document.getElementById("name").value;
    const vorname = document.getElementById("vorname").value;
    const geburtsdatum = document.getElementById("geburtsdatum").value;

    let text = "Kontrollformular%0D%0A%0D%0A";
    text += "Name: " + name + "%0D%0A";
    text += "Vorname: " + vorname + "%0D%0A";
    text += "Geburtsdatum: " + geburtsdatum + "%0D%0A%0D%0A";

    // Alkohol
    const alkWert = document.getElementById("alkoholwert").value;
    if (alkoholZeit !== "") {
        text += "Alkoholkontrolle:%0D%0A";
        text += "Zeit: " + alkoholZeit + "%0D%0A";
        text += "Wert: " + alkWert + "%0D%0A%0D%0A";
    }

    // Drogen
    const drogenPos = document.getElementById("drogen-pos").checked;
    const drogenNeg = document.getElementById("drogen-neg").checked;

    if (drogenZeit !== "") {
        text += "Drogenkontrolle:%0D%0A";
        text += "Zeit: " + drogenZeit + "%0D%0A";
        if (drogenPos) text += "Resultat: positiv%0D%0A";
        if (drogenNeg) text += "Resultat: negativ%0D%0A";
    }

    // Mail Ã¶ffnen
    window.location.href = "mailto:?subject=Kontrollformular&body=" + text;
}
</script>
</head>

<body>

<h2>Kontrollformular</h2>

<div class="section">
    <label>Nachname:</label>
    <input type="text" id="name">

    <label>Vorname:</label>
    <input type="text" id="vorname">

    <label>Geburtsdatum:</label>
    <input type="date" id="geburtsdatum">
</div>

<!-- Buttons -->
<button onclick="alkoholClicked()">Alkohol</button>
<button onclick="drogenClicked()">Drogen</button>

<!-- Alkohol-Eingabe -->
<div id="alkohol-section" class="section hidden">
    <h3>Alkoholwert eingeben</h3>
    <label>Wert (z.B. 0.5):</label>
    <input type="number" id="alkoholwert" step="0.01">
</div>

<!-- Drogen-Eingabe -->
<div id="drogen-section" class="section hidden">
    <h3>Drogenkontrolle</h3>
    <label><input type="checkbox" id="drogen-pos"> positiv</label><br>
    <label><input type="checkbox" id="drogen-neg"> negativ</label>
</div>

<button onclick="sendeEmail()" style="background-color:#28a745; color:white;">E-Mail senden</button>

</body>
</html>
